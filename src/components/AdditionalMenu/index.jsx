import React, {forwardRef} from "react"
import styles from './styles.sass'
import ArrowRight from '@icons/arrowRight.svg'


const AdditionalMenu = forwardRef((props, ref) => {

  function toggleLivechatWidget() {
    const stateLiveChat = window.LiveChatWidget.get("state")
    if (stateLiveChat.visibility === 'maximized') return window.LiveChatWidget.call("hide")
    else return window.LiveChatWidget.call("maximize")
  }

  function computedCancelButton () {
    if (props.data.id && props.step !== 8) return true
    return false
  }

  return (
    <div className={styles.additionalMenu}>
      <div className={styles.additionalMenu__сontainer} ref={ref}>
        <h3>
          <svg onClick={() => props.setShow(false)} width="8" height="14" viewBox="0 0 8 14" fill="none">
            <path d="M1 13L7 7L1 1" stroke="var(--Icon-Color)" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          </svg>
          Help
        </h3>
        {computedCancelButton() &&
          <button className={styles.cancelPayment} onClick={() => {props.data.cancelPayment(props.data.cancelReturnUrl), props.setShow(false)}}>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M15 9L9 15M9 9L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
            <span>Canсel payment</span>
          </button>
        }
        <button className={styles.supportCall} onClick={() => toggleLivechatWidget()}>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <g clipPath="url(#clip0_836_274)">
            <path d="M5.25 18.75H4.5C3.30653 18.75 2.16193 18.2759 1.31802 17.432C0.474106 16.5881 0 15.4435 0 14.25C0 13.0565 0.474106 11.9119 1.31802 11.068C2.16193 10.2241 3.30653 9.75 4.5 9.75H5.25C5.44891 9.75 5.63968 9.82902 5.78033 9.96967C5.92098 10.1103 6 10.3011 6 10.5V18C6 18.1989 5.92098 18.3897 5.78033 18.5303C5.63968 18.671 5.44891 18.75 5.25 18.75ZM4.5 11.25C3.70435 11.25 2.94129 11.5661 2.37868 12.1287C1.81607 12.6913 1.5 13.4544 1.5 14.25C1.5 15.0456 1.81607 15.8087 2.37868 16.3713C2.94129 16.9339 3.70435 17.25 4.5 17.25V11.25Z" fill="white"/>
            <path d="M6.75 18.75H5.25C5.05109 18.75 4.86032 18.671 4.71967 18.5303C4.57902 18.3897 4.5 18.1989 4.5 18V10.5C4.5 10.3011 4.57902 10.1103 4.71967 9.96967C4.86032 9.82902 5.05109 9.75 5.25 9.75H6.75C7.34654 9.75066 7.91845 9.98792 8.34027 10.4097C8.76208 10.8315 8.99934 11.4035 9 12V16.5C8.99934 17.0965 8.76208 17.6685 8.34027 18.0903C7.91845 18.5121 7.34654 18.7493 6.75 18.75ZM6 17.25H6.75C6.94886 17.2498 7.13952 17.1707 7.28013 17.0301C7.42075 16.8895 7.49982 16.6989 7.5 16.5V12C7.49982 11.8011 7.42075 11.6105 7.28013 11.4699C7.13952 11.3293 6.94886 11.2502 6.75 11.25H6V17.25Z" fill="white"/>
            <path d="M19.5 18.75H18.75C18.5511 18.75 18.3603 18.671 18.2197 18.5303C18.079 18.3897 18 18.1989 18 18V10.5C18 10.3011 18.079 10.1103 18.2197 9.96967C18.3603 9.82902 18.5511 9.75 18.75 9.75H19.5C20.6935 9.75 21.8381 10.2241 22.682 11.068C23.5259 11.9119 24 13.0565 24 14.25C24 15.4435 23.5259 16.5881 22.682 17.432C21.8381 18.2759 20.6935 18.75 19.5 18.75V18.75ZM19.5 11.25V17.25C20.2956 17.25 21.0587 16.9339 21.6213 16.3713C22.1839 15.8087 22.5 15.0456 22.5 14.25C22.5 13.4544 22.1839 12.6913 21.6213 12.1287C21.0587 11.5661 20.2956 11.25 19.5 11.25V11.25Z" fill="white"/>
            <path d="M18.75 18.75H17.25C16.6535 18.7493 16.0815 18.5121 15.6597 18.0903C15.2379 17.6685 15.0007 17.0965 15 16.5V12C15.0007 11.4035 15.2379 10.8315 15.6597 10.4097C16.0815 9.98792 16.6535 9.75066 17.25 9.75H18.75C18.9489 9.75 19.1397 9.82902 19.2803 9.96967C19.421 10.1103 19.5 10.3011 19.5 10.5V18C19.5 18.1989 19.421 18.3897 19.2803 18.5303C19.1397 18.671 18.9489 18.75 18.75 18.75ZM17.25 11.25C17.0511 11.2502 16.8605 11.3293 16.7199 11.4699C16.5793 11.6105 16.5002 11.8011 16.5 12V16.5C16.5002 16.6989 16.5793 16.8895 16.7199 17.0301C16.8605 17.1707 17.0511 17.2498 17.25 17.25H18V11.25H17.25Z" fill="white"/>
            <path d="M21.75 12C21.5511 12 21.3603 11.921 21.2197 11.7803C21.079 11.6397 21 11.4489 21 11.25V10.5C21 8.11305 20.0518 5.82387 18.364 4.13604C16.6761 2.44821 14.3869 1.5 12 1.5C9.61305 1.5 7.32387 2.44821 5.63604 4.13604C3.94821 5.82387 3 8.11305 3 10.5V11.25C3 11.4489 2.92098 11.6397 2.78033 11.7803C2.63968 11.921 2.44891 12 2.25 12C2.05109 12 1.86032 11.921 1.71967 11.7803C1.57902 11.6397 1.5 11.4489 1.5 11.25V10.5C1.5 7.71523 2.60625 5.04451 4.57538 3.07538C6.54451 1.10625 9.21523 0 12 0C14.7848 0 17.4555 1.10625 19.4246 3.07538C21.3938 5.04451 22.5 7.71523 22.5 10.5V11.25C22.5 11.4489 22.421 11.6397 22.2803 11.7803C22.1397 11.921 21.9489 12 21.75 12Z" fill="white"/>
            <path d="M17.25 22.5H13.5C13.3011 22.5 13.1103 22.421 12.9697 22.2803C12.829 22.1397 12.75 21.9489 12.75 21.75C12.75 21.5511 12.829 21.3603 12.9697 21.2197C13.1103 21.079 13.3011 21 13.5 21H17.25C17.4489 20.9998 17.6395 20.9207 17.7801 20.7801C17.9207 20.6395 17.9998 20.4489 18 20.25V18C18 17.8011 18.079 17.6103 18.2197 17.4697C18.3603 17.329 18.5511 17.25 18.75 17.25C18.9489 17.25 19.1397 17.329 19.2803 17.4697C19.421 17.6103 19.5 17.8011 19.5 18V20.25C19.4993 20.8465 19.2621 21.4185 18.8403 21.8403C18.4185 22.2621 17.8465 22.4993 17.25 22.5Z" fill="white"/>
            <path d="M12 24C11.555 24 11.12 23.868 10.75 23.6208C10.38 23.3736 10.0916 23.0222 9.92127 22.611C9.75097 22.1999 9.70642 21.7475 9.79323 21.311C9.88005 20.8746 10.0943 20.4737 10.409 20.159C10.7237 19.8443 11.1246 19.6301 11.561 19.5432C11.9975 19.4564 12.4499 19.501 12.861 19.6713C13.2722 19.8416 13.6236 20.13 13.8708 20.5C14.118 20.87 14.25 21.305 14.25 21.75C14.2493 22.3465 14.0121 22.9185 13.5903 23.3403C13.1685 23.7621 12.5965 23.9993 12 24ZM12 21C11.8517 21 11.7067 21.044 11.5833 21.1264C11.46 21.2088 11.3639 21.3259 11.3071 21.463C11.2503 21.6 11.2355 21.7508 11.2644 21.8963C11.2934 22.0418 11.3648 22.1754 11.4697 22.2803C11.5746 22.3852 11.7082 22.4567 11.8537 22.4856C11.9992 22.5145 12.15 22.4997 12.287 22.4429C12.4241 22.3861 12.5412 22.29 12.6236 22.1667C12.706 22.0433 12.75 21.8983 12.75 21.75C12.7498 21.5511 12.6707 21.3605 12.5301 21.2199C12.3895 21.0793 12.1989 21.0002 12 21V21Z" fill="white"/>
            </g>
            <defs>
            <clipPath id="clip0_836_274">
              <rect width="24" height="24" fill="white"/>
            </clipPath>
            </defs>
          </svg>
          <span>Contact support</span>
        </button>
      </div>
  </div>
  )
})
export default AdditionalMenu